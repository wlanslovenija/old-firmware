Index: madwifi-trunk-r3314/hal/public/mips-be-elf.inc
===================================================================
--- madwifi-trunk-r3314.orig/hal/public/mips-be-elf.inc	2008-02-20 18:10:46.339155111 +0100
+++ madwifi-trunk-r3314/hal/public/mips-be-elf.inc	2008-02-20 18:10:46.439160810 +0100
@@ -71,5 +71,5 @@
 
 LDOPTS=	-EB
 COPTS+=	-DAH_BYTE_ORDER=AH_BIG_ENDIAN
-COPTS+=	-G 0 -EB -mno-abicalls -fno-pic -mips2 -Wa,--trap \
+COPTS+=	-G 0 -mno-abicalls -fno-pic -mips32 -Wa,--trap \
 	-fno-strict-aliasing -fno-common -fomit-frame-pointer -mlong-calls
Index: madwifi-trunk-r3314/hal/public/mips-le-elf.inc
===================================================================
--- madwifi-trunk-r3314.orig/hal/public/mips-le-elf.inc	2008-02-20 18:10:46.347155567 +0100
+++ madwifi-trunk-r3314/hal/public/mips-le-elf.inc	2008-02-20 18:10:46.443161036 +0100
@@ -68,5 +68,5 @@
 
 LDOPTS=	-EL
 COPTS+=	-DAH_BYTE_ORDER=AH_LITTLE_ENDIAN
-COPTS+=	-G 0 -EL -mno-abicalls -fno-pic -mips2 -Wa,--trap \
+COPTS+=	-G 0 -mno-abicalls -fno-pic -mips32 -Wa,--trap \
 	-fno-strict-aliasing -fno-common -fomit-frame-pointer -mlong-calls
Index: madwifi-trunk-r3314/hal/public/xscale-be-elf.inc
===================================================================
--- madwifi-trunk-r3314.orig/hal/public/xscale-be-elf.inc	2008-02-20 18:10:46.351155793 +0100
+++ madwifi-trunk-r3314/hal/public/xscale-be-elf.inc	2008-02-20 18:10:46.451161492 +0100
@@ -77,5 +77,5 @@
 
 LDOPTS=	-EB
 COPTS+=	-DAH_BYTE_ORDER=AH_BIG_ENDIAN
-COPTS+= -march=armv4 -mbig-endian -fno-strict-aliasing -fno-common -mapcs-32 \
+COPTS+= -march=armv5te -mbig-endian -fno-strict-aliasing -fno-common  \
 	-mtune=xscale  -mshort-load-bytes
Index: madwifi-trunk-r3314/hal/public/xscale-le-elf.inc
===================================================================
--- madwifi-trunk-r3314.orig/hal/public/xscale-le-elf.inc	2008-02-20 18:10:46.363156477 +0100
+++ madwifi-trunk-r3314/hal/public/xscale-le-elf.inc	2008-02-20 18:10:46.455161721 +0100
@@ -79,4 +79,4 @@
 LDOPTS=	-EL
 COPTS+=	-DAH_BYTE_ORDER=AH_LITTLE_ENDIAN
 COPTS+= -march=armv4 -mlittle-endian -fno-strict-aliasing -fno-common \
-	-mapcs-32 -mtune=xscale  -mshort-load-bytes
+	-mtune=xscale  -mshort-load-bytes
